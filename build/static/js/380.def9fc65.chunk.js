"use strict";(self.webpackChunkband_schedule_web=self.webpackChunkband_schedule_web||[]).push([[380],{5380:function(e,t,r){r.r(t),r.d(t,{default:function(){return Oe}});var n=r(2791),i=r(15),o=r(7689),l=r(885),a=r(1091),s=r(6398),d=r(228),c=r(3811),u=r(5194),p=r(4544),x=r(1872),f=r(2161),h=r(6284),m=r(8087),b=r(6739),v=r(8928),g=r(4565),Z=r(5209),j=r(628),y=r(2539),S=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],w=r(184),_=function(){var e=(0,y.M)(),t=e.checkouts,r=e.currentDate,i=(0,j.X)().mobile,o=(0,n.useState)(""),a=(0,l.Z)(o,2),s=a[0],c=a[1],p=(0,n.useState)(""),x=(0,l.Z)(p,2),f=x[0],h=x[1],m=(0,n.useState)(0),b=(0,l.Z)(m,2),_=b[0],C=b[1];return(0,n.useEffect)((function(){!function(){var e=null===t||void 0===t?void 0:t.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0);c(null===e||void 0===e?void 0:e.toLocaleString("pt-br",{style:"currency",currency:"BRL"}));var r=null===t||void 0===t?void 0:t.filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0);h(null===r||void 0===r?void 0:r.toLocaleString("pt-br",{style:"currency",currency:"BRL"})),C((e||0)-(r||0))}()}),[t]),(0,w.jsx)(v.Z,{style:{padding:"16px",margin:"0px auto",position:"relative"},children:(0,w.jsxs)(u.Z,{style:{display:"flex",flexDirection:i?"column":"row",textAlign:i?"left":"center",paddingBottom:"16px"},children:[(0,w.jsxs)(d.Z,{style:{borderRight:i?"":"solid 2px #e1e1e1",borderBottom:i?"solid 2px #e1e1e1":"",marginBottom:i?"8px":"",flexBasis:"20%"},children:[(0,w.jsx)(g.Z,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:"bold"},children:"M\xeas atual"}),(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:S[r.getMonth()]})]}),(0,w.jsxs)(d.Z,{style:{borderRight:i?"":"solid 2px #e1e1e1",borderBottom:i?"solid 2px #e1e1e1":"",marginBottom:i?"8px":"",flexBasis:"20%"},children:[(0,w.jsx)(g.Z,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:"bold"},children:"Entradas"}),(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:s||"--"})]}),(0,w.jsxs)(d.Z,{style:{borderRight:i?"":"solid 2px #e1e1e1",borderBottom:i?"solid 2px #e1e1e1":"",marginBottom:i?"8px":"",flexBasis:"20%"},children:[(0,w.jsx)(g.Z,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:"bold"},children:"Sa\xeddas"}),(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:f||"--"})]}),(0,w.jsxs)(d.Z,{style:{borderRight:i?"":"solid 2px #e1e1e1",borderBottom:i?"solid 2px #e1e1e1":"",marginBottom:i?"8px":"",flexBasis:"20%"},children:[(0,w.jsx)(g.Z,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:"bold"},children:"Saldo"}),(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:_?null===_||void 0===_?void 0:_.toLocaleString("pt-br",{style:"currency",currency:"BRL"}):"--"})]}),(0,w.jsxs)(d.Z,{style:{flexBasis:"20%"},children:[(0,w.jsx)(g.Z,{variant:"subtitle1",gutterBottom:!0,style:{fontWeight:"bold"},children:"Status"}),0==_?(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:(0,w.jsx)(Z.Z,{label:"--",color:"secondary"})}):_>0?(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:(0,w.jsx)(Z.Z,{label:"Positivo",color:"success"})}):(0,w.jsx)(g.Z,{variant:"subtitle2",gutterBottom:!0,color:"#707070",children:(0,w.jsx)(Z.Z,{label:"Negativo",color:"error"})})]})]})})},C=r(4165),B=r(5861),D=r(4942),L=r(1413),k=r(277),R=r(1680),I=r(9773),z=r(3651),E=r(1745),A=r(9963),M=r(9827),N=r(807),W=r(6650),T=r(1192),P=r(6666),V=r.n(P),O=r(5397),F=r(7195),q=r(7976),H=r(2232),Q=r(2637),Y=r(464),X=r(8440),J=r(9571),$=r(7248),G=r(5985),K=r(5987),U=r(5953),ee=r(8254),te=r(3492),re=r(2900),ne=r(6321),ie=r(7924),oe=r(1898),le=r(508),ae=r(3057),se=r(2490),de=r(9568),ce=r(1134),ue=r(4695),pe=r(1724),xe=r(9911),fe=r(1584),he=r(3833),me=r(2676),be=r(4405),ve=r(3399),ge=r(7792),Ze=r(9778),je=["onChange"],ye=pe.Ry().shape({value:pe.Z_().required("Valor \xe9 obrigat\xf3rio"),type:pe.Z_().required("Tipo da movimenta\xe7\xe3o \xe9 obrigat\xf3rio"),owner:pe.Z_().notRequired().nullable(),description:pe.Z_().notRequired().nullable(),id_band:pe.Rx().required("Banda \xe9 obrigat\xf3rio"),id_creditor:pe.Rx().required("Credor \xe9 obrigat\xf3rio"),date:pe.hT().default(new Date).notRequired().nullable(),appointment_title:pe.Z_().required("Obrigat\xf3rio procurar por um evento"),appointment_date:pe.Z_().notRequired().nullable(),id_appointment:pe.Rx().required("Evento \xe9 obrigat\xf3rio")}),Se=function(e){var t,r,o=e.toggleDrawer,s=e.data,c=(0,i.a)().id,u=(0,j.X)().mobile,p=null===s||void 0===s?void 0:s.id,f=(0,ve.f)().myBands,h=(0,ge.P)(),m=h.creditors,b=h.getCreditors,v=(0,Ze.Q)(),Z=v.getMyAppointmentsByTitle,S=v.appointmentsCheckout,_=(0,y.M)(),D=_.createCheckout,k=_.updateCheckout,R=(0,n.useState)(null===s||void 0===s?void 0:s.id_band),I=(0,l.Z)(R,2),z=I[0],E=I[1],A=!!p,M=(0,n.useState)(""),N=(0,l.Z)(M,2),W=N[0],T=N[1],P=(0,n.useState)(null===s||void 0===s?void 0:s.type),O=(0,l.Z)(P,2),F=O[0],q=O[1],H=(0,n.useState)(null===s||void 0===s||null===(t=s.creditor)||void 0===t?void 0:t.id),Q=(0,l.Z)(H,2),Y=Q[0],X=Q[1],J=(0,ce.cI)({resolver:(0,ue.X)(ye),mode:"onSubmit"}),$=J.handleSubmit,pe=J.control,Se=J.setValue,we=J.formState.errors,_e=J.register,Ce=J.getValues,Be=J.setError,De=J.clearErrors,Le=(0,ce.qo)({control:pe,name:"type"}),ke=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(t){var r,n,i,l;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=9;break}return r=Re(t),e.next=4,k(r,s.id);case 4:n=e.sent,G.Am[n.success?"success":"error"](n.message),n.success&&o(),e.next=15;break;case 9:return i=Re(t),e.next=12,D(i);case 12:l=e.sent,G.Am[l.success?"success":"error"](l.message),l.success&&o();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(e){var t="string"==typeof e.value?e.value.replace(".","").replace(",",".").replace(/\D\$\s/,""):0,r=new Date("object"==typeof e.date?e.date.toISOString().substring(0,10)+(new Date).toISOString().substring(10,19):"");return(0,L.Z)((0,L.Z)({},e),{},{value:Number(t),date:r})},Ie=function(e){var t=e.split("").filter((function(e){return/\d/.test(e)})).join("").padStart(3,"0");e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pt-BR",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BRL";return new Intl.NumberFormat(t,{style:"currency",currency:r}).format(e)}(t.slice(0,-2)+"."+t.slice(-2)),T(e)};var ze=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(){var t,r,n;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ce("appointment_date"),r=Ce("appointment_title")){e.next=4;break}return e.abrupt("return",Be("appointment_title",{message:"Obrigat\xf3rio procurar por um evento"}));case 4:return De("appointment_title"),n=t?new Date(t):void 0,e.next=8,Z(c,r,n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.useEffect((function(){var e,t;A&&(Se("type",s.type),q(s.type),Se("date",new Date(s.date).toISOString().substring(0,10)),Ie(s.value.toString()),Se("description",s.description),Se("owner",s.owner),Se("id_band",s.id_band),Se("id_creditor",null===(e=s.creditor)||void 0===e?void 0:e.id),X(null===(t=s.creditor)||void 0===t?void 0:t.id),E(s.id_band),Se("appointment_title","anything"),Se("id_appointment",s.id_appointment))}),[A]),n.useEffect((function(){return Se("value",W)}),[W]),n.useEffect((function(){b()}),[]),(0,w.jsx)(U.ZP,{padding:u?2:8,children:(0,w.jsxs)("form",{onSubmit:$(ke),children:[(0,w.jsxs)(be.Z,{spacing:3,children:[(0,w.jsx)(be.Z,{children:(0,w.jsx)(g.Z,{variant:"subtitle1",children:"Preencha com as informa\xe7\xf5es da entrada/sa\xedda"})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(ce.Qr,{name:"value",control:pe,render:function(e){var t=e.field,r=(t.onChange,(0,K.Z)(t,je));return(0,w.jsx)(xe.Z,(0,L.Z)((0,L.Z)({},r),{},{size:"small",autoComplete:"false",label:"Valor *",error:!!we.value,helperText:we.value&&we.value.message,fullWidth:!0,name:"value",onChange:function(e){return Ie(e.currentTarget.value)},value:W,InputProps:{startAdornment:(0,w.jsx)(ee.Z,{position:"start",children:(0,w.jsx)(fe.Z,{})})}}))}})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(ce.Qr,{control:pe,name:"type",render:function(e){var t=e.field;return(0,w.jsxs)(te.Z,(0,L.Z)((0,L.Z)({},t),{},{defaultValue:F,children:[(0,w.jsx)(re.Z,{value:"1",control:(0,w.jsx)(ne.Z,{}),label:"Entrada"}),(0,w.jsx)(re.Z,{value:"2",control:(0,w.jsx)(ne.Z,{}),label:"Sa\xedda"})]}))}})}),!!we.type&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:null===(r=we.type)||void 0===r?void 0:r.message}),(0,w.jsx)(be.Z,{children:(0,w.jsx)(ce.Qr,{name:"id_creditor",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(d.Z,{children:(0,w.jsxs)(oe.Z,{error:!!we.id_creditor,fullWidth:!0,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"Credor *"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({size:"small",sx:{minWidth:270},labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",label:"Credor",defaultValue:Y,disabled:A},t),{},{children:Le?m.filter((function(e){return 1==Le?e.is_supplier:!e.is_supplier})).map((function(e){if(!e.is_deleted||A)return(0,w.jsx)(se.Z,{value:e.id,children:e.name},V()())})):(0,w.jsx)(se.Z,{disabled:!0,children:"Selecione o tipo de transa\xe7\xe3o primeiro"})})),!!we.id_band&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:"Selecione uma banda"})]})})}})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(oe.Z,{fullWidth:!0,children:(0,w.jsxs)("fieldset",{style:{border:"".concat(we.date?"1px #E34367 solid":"1px #C0C0C0 solid"),borderRadius:"4px"},children:[(0,w.jsx)("legend",{style:{fontSize:"12px",color:"#696969"},children:"Data"}),(0,w.jsx)(d.Z,{children:(0,w.jsx)("input",(0,L.Z)((0,L.Z)({type:"date",defaultValue:(new Date).toISOString().substring(0,10)},_e("date")),{},{style:{height:"24px",border:"none",outline:"none",width:"100%"}}))})]})})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(ce.Qr,{name:"description",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(xe.Z,(0,L.Z)((0,L.Z)({},t),{},{autoComplete:"false",label:"Descri\xe7\xe3o",error:!!we.description,helperText:we.description&&we.description.message,fullWidth:!0,name:"description",size:"small",InputProps:{startAdornment:(0,w.jsx)(ee.Z,{position:"start",children:(0,w.jsx)(de.Z,{})})}}))}})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(ce.Qr,{name:"owner",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(xe.Z,(0,L.Z)((0,L.Z)({},t),{},{autoComplete:"false",label:"Respons\xe1vel",error:!!we.owner,helperText:we.owner&&we.owner.message,fullWidth:!0,name:"owner",size:"small",InputProps:{startAdornment:(0,w.jsx)(ee.Z,{position:"start",children:(0,w.jsx)(he.Z,{})})}}))}})}),(0,w.jsx)(ce.Qr,{name:"id_band",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(d.Z,{children:(0,w.jsxs)(oe.Z,{error:!!we.id_band,fullWidth:!0,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"Banda *"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({size:"small",sx:{minWidth:270},labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",label:"Banda",disabled:A,defaultValue:z},t),{},{children:f.map((function(e){if(!e.is_deleted||A)return(0,w.jsx)(se.Z,{value:e.id,children:e.name},V()())}))})),!!we.id_band&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:"Selecione uma banda"})]})})}}),!A&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x.Z,{variant:"inset",style:{marginTop:"10px"}}),(0,w.jsx)(be.Z,{marginTop:"12px",children:(0,w.jsx)(g.Z,{variant:"subtitle1",children:"Procure por um evento"})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(ce.Qr,{name:"appointment_title",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(xe.Z,(0,L.Z)((0,L.Z)({},t),{},{label:"T\xedtulo do evento *",error:!!we.appointment_title,helperText:we.appointment_title&&we.appointment_title.message,name:"appointment_title",fullWidth:!0,size:"small",InputProps:{startAdornment:(0,w.jsx)(ee.Z,{position:"start",children:(0,w.jsx)(me.Z,{})})}}))}})}),(0,w.jsx)(be.Z,{direction:u?"column":"row",spacing:2,children:(0,w.jsx)(oe.Z,{fullWidth:!0,size:"small",children:(0,w.jsxs)("fieldset",{style:{border:"".concat(we.appointment_date?"1px #E34367 solid":"1px #C0C0C0 solid"),borderRadius:"4px"},children:[(0,w.jsx)("legend",{style:{fontSize:"12px",color:"#696969"},children:"Data do evento"}),(0,w.jsx)(d.Z,{children:(0,w.jsx)("input",(0,L.Z)((0,L.Z)({type:"date",defaultValue:void 0},_e("appointment_date")),{},{style:{height:"24px",border:"none",outline:"none",width:"100%"}}))})]})})}),(0,w.jsx)(be.Z,{mt:3,children:(0,w.jsx)(a.Z,{type:"button",variant:"outlined",color:"secondary",onClick:ze,children:"Procurar evento"})}),(0,w.jsx)(be.Z,{mt:3,children:(0,w.jsx)(ce.Qr,{name:"id_appointment",control:pe,render:function(e){var t=e.field;return(0,w.jsx)(d.Z,{children:(0,w.jsxs)(oe.Z,{error:!!we.id_appointment,fullWidth:!0,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"Evento *"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({size:"small",sx:{minWidth:270},labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",label:"Evento *"},t),{},{children:S.length?S.map((function(e){return(0,w.jsxs)(se.Z,{value:e.id,style:{flexDirection:"column",alignItems:"self-start"},children:[(0,w.jsx)(d.Z,{fontWeight:800,children:e.title}),(0,w.jsxs)(d.Z,{fontSize:12,display:"block",children:[" ",new Date(e.start_date).toLocaleDateString()]})]},V()())})):(0,w.jsx)(se.Z,{disabled:!0,children:"Nenhum evento encontrado"})})),!!we.id_band&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:"Selecione uma banda"})]})})}})})]})]}),(0,w.jsx)(be.Z,{spacing:"10px",mt:3,children:(0,w.jsx)(a.Z,{type:"submit",variant:"contained",children:A?"Atualizar":"Salvar"})})]})})},we=n.forwardRef((function(e,t){return(0,w.jsx)(H.Z,(0,L.Z)({direction:"up",ref:t},e))})),_e=function(){(0,T.N)().labels;var e=(0,y.M)(),t=e.checkouts,r=e.deleteCheckout,i=n.useState([]),o=(0,l.Z)(i,2),s=o[0],d=o[1],u=n.useState({}),f=(0,l.Z)(u,2),h=f[0],m=f[1],v=(0,n.useState)(!1),g=(0,l.Z)(v,2),Z=g[0],j=g[1],S=function(){j((function(e){return!e}))},_=n.useState(null),L=(0,l.Z)(_,2),P=L[0],H=(L[1],n.useState(!1)),K=(0,l.Z)(H,2),U=K[0],ee=K[1],te=n.useState({}),re=(0,l.Z)(te,2),ne=re[0],ie=re[1],oe=function(){return ee(!1)};Boolean(P);n.useEffect((function(){var e=null===t||void 0===t?void 0:t.map((function(e){return function(e){var r,n,i;return{acoes:[{icon:(0,w.jsx)(O.Z,{fontSize:"small",color:"error"}),action:function(e){return function(e){ee(!0),ie(e)}(e)}},{icon:(0,w.jsx)(F.Z,{fontSize:"small",style:{marginLeft:"4px"},color:"primary"}),action:function(e){var r=t.find((function(t){return t.id==e.id}));r&&(null===r||void 0===r?void 0:r.id)&&m(r),S()}}],type:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{style:{transform:1==e.type?"rotate(180deg)":"",color:1==e.type?"green":"red"},children:(0,w.jsx)(q.Z,{})})}),value:Number(e.value).toLocaleString("pt-br",{style:"currency",currency:"BRL"})||"--",date:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{children:new Date(e.date).toLocaleString().substring(0,16).split(" ")[0]})}),owner:e.owner||"--",description:e.description||"--",creditor:(null===(r=e.creditor)||void 0===r?void 0:r.name)||"--",band:null===(n=e.band)||void 0===n?void 0:n.name,id:e.id,id_band:null===(i=e.band)||void 0===i?void 0:i.id}}(e)}));d(e)}),[t]);var le=(0,k.ZP)(z.Z)((function(e){var t,r=e.theme;return t={},(0,D.Z)(t,"&.".concat(E.Z.head),{backgroundColor:r.palette.common.black,color:r.palette.common.white}),(0,D.Z)(t,"&.".concat(E.Z.body),{fontSize:14}),t})),ae=(0,k.ZP)(N.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));var se=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ne.id,ne.id_band);case 2:t=e.sent,G.Am.error(t.message),oe();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(W.Z,{sx:{width:"100%",overflow:"hidden",marginTop:"16px"},className:"finances-table",children:[(0,w.jsx)(A.Z,{component:W.Z,sx:{maxHeight:650},children:(0,w.jsxs)(R.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,w.jsx)(M.Z,{children:(0,w.jsxs)(N.Z,{style:{textAlign:"center"},children:[(0,w.jsx)(le,{style:{textAlign:"center"},children:"A\xe7\xf5es"}),(0,w.jsx)(le,{style:{textAlign:"center"},children:"Tipo"}),(0,w.jsx)(le,{style:{textAlign:"center"},children:"Valor"}),(0,w.jsx)(le,{children:"Data"}),(0,w.jsx)(le,{children:"Respons\xe1vel"}),(0,w.jsx)(le,{children:"Detalhes"}),(0,w.jsx)(le,{children:"Credor"}),(0,w.jsx)(le,{style:{textAlign:"center"},children:"Artista"})]})}),(0,w.jsx)(I.Z,{children:s.map((function(e){var t;return(0,w.jsxs)(ae,{sx:{":hover":{backdropFilter:"contrast(0.5)"}},children:[(0,w.jsx)(le,{style:{textAlign:"center"},children:e.acoes.map((function(t,r){return(0,w.jsx)("span",{onClick:function(){return t.action(e)},children:t.icon},r)}))}),(0,w.jsx)(le,{style:{textAlign:"center"},children:e.type}),(0,w.jsx)(le,{style:{textAlign:"center"},children:e.value}),(0,w.jsx)(le,{children:e.date}),(0,w.jsx)(le,{children:e.owner}),(0,w.jsxs)(le,{title:e.description,children:[e.description.substring(0,200),null!==(t=e.description.length>200)&&void 0!==t?t:"..."]}),(0,w.jsx)(le,{children:e.creditor}),(0,w.jsx)(le,{children:e.band})]},V()())}))})]})}),(0,w.jsxs)(Q.Z,{open:U,TransitionComponent:we,keepMounted:!0,onClose:oe,"aria-describedby":"alert-dialog-slide-description",children:[(0,w.jsx)(Y.Z,{children:"Tem certeza que deseja excluir?"}),(0,w.jsx)(X.Z,{children:(0,w.jsx)(J.Z,{id:"alert-dialog-slide-description",children:"Esta a\xe7\xe3o n\xe3o poder\xe1 ser desfeita"})}),(0,w.jsxs)($.Z,{children:[(0,w.jsx)(a.Z,{onClick:oe,children:"Cancelar"}),(0,w.jsx)(a.Z,{onClick:se,color:"error",children:"Excluir"})]})]}),(0,w.jsxs)(p.ZP,{anchor:"left",open:Z,onClose:S,style:{padding:"0 4px 0 4px"},children:[(0,w.jsx)(c.Z,{onClick:S,size:"medium",style:{width:"25px",marginLeft:"8px"},children:(0,w.jsx)(b.Z,{alignmentBaseline:"baseline"})}),(0,w.jsx)(x.Z,{}),(null===h||void 0===h?void 0:h.id)&&(0,w.jsx)(Se,{data:h,toggleDrawer:function(){S(),m({})}}),(0,w.jsx)(x.Z,{})]})]})},Ce=r(5967),Be=r(3623);Ce.kL.register(Ce.uw,Ce.f$,Ce.od,Ce.jn,Ce.Dx,Ce.u,Ce.De);var De={responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{title:{display:!1,text:"Chart.js Line Chart - Multi Axis"}},scales:{y:{type:"linear",display:!0,position:"left",suggestedMin:30,suggestedMax:1e3}}};function Le(){var e=(0,y.M)(),t=e.checkoutsYearly,r=(e.currentDate,{labels:S,datasets:[{label:"Entradas",data:S.filter((function(e,t){return(new Date).getMonth()>=t})).map((function(e,r){return t.filter((function(e){return new Date(e.date).getMonth()==r&&1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0)}))||null,borderColor:"#2E7D32",backgroundColor:"#2E7D32",yAxisID:"y"},{label:"Sa\xeddas",data:S.filter((function(e,t){return(new Date).getMonth()>=t})).map((function(e,r){return t.filter((function(e){return new Date(e.date).getMonth()==r&&2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0)}))||null,borderColor:"#D64045",backgroundColor:"#D64045",yAxisID:"y"}]});return(0,w.jsxs)("div",{children:[(0,w.jsx)(g.Z,{marginTop:"32px",children:"Gr\xe1fico anual do fluxo de finan\xe7as: 2023"}),(0,w.jsx)(Be.x1,{options:De,data:r})]})}var ke=r(2982),Re=r(2167),Ie=r(9276),ze=r(172),Ee=function(e){var t=e.setCurrentFilter,r=(0,j.X)().mobile,o=(0,ve.f)(),l=o.myBands,s=o.getMyBands,d=o.setCurrentBand,u=((0,Ze.Q)().getMyAppointmentsAdvanced,(0,i.a)()),p=(u.id,u.bandVisibility,u.adm,(new Date).getMonth()+1),x=(0,y.M)(),f=x.getCheckouts,h=x.setCurrentDate,m=(0,ce.cI)({mode:"onSubmit"}),b=m.register,v=m.handleSubmit,g=m.setValue,Z=m.formState.errors,S=m.watch,_=m.control,D=S("id_band"),k=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(r){var n,i,o,l,a,s,d;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t([]),n={},Object.keys(r).map((function(e){parseInt(r[e])>0&&(n[e]=r[e])})),"0"!=r.estado&&(n.estado=r.estado),Object.keys(n).map((function(e){return t((function(t){return[].concat((0,ke.Z)(t),[e])}))})),i=new Date,o=new Date(i.getFullYear(),r.mes-1),l=new Date(i.getFullYear(),r.mes,0),h(o),a=o.toISOString().substring(0,10),s=l.toISOString().substring(0,10),e.next=13,f(a,s,r.id_band);case 13:d=e.sent,G.Am[d.success?"success":"error"](d.message);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){g("period","1"),s(),h(new Date)}),[]),(0,n.useEffect)((function(){var e;D&&d((null===(e=l.find((function(e){return e.id==D})))||void 0===e?void 0:e.name)||"")}),[D]),(0,n.useEffect)((function(){if(1==l.filter((function(e){return!e.is_deleted})).length){var e=new Date,t=new Date(e.getFullYear(),(new Date).getMonth()),r=new Date(e.getFullYear(),(new Date).getMonth()+1,0);h(t);var n=t.toISOString().substring(0,10),i=r.toISOString().substring(0,10);d(l.filter((function(e){return!e.is_deleted}))[0].name||""),f(n,i,l.filter((function(e){return!e.is_deleted}))[0].id)}}),[l]),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(be.Z,{alignItems:"center",gap:2,direction:r?"column":"row",component:"form",onSubmit:v(k),p:"8px 0",display:"flex",justifyContent:"end",children:(0,w.jsx)(Ie.Z,{width:r?"300px":"600px",display:"flex",gap:1,justifyContent:r?"center":"end",children:(0,w.jsxs)(be.Z,{direction:r?"column":"row",gap:1,alignItems:"center",justifyContent:"center",children:[(0,w.jsxs)(oe.Z,{sx:{minWidth:120},fullWidth:!0,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"M\xeas"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({labelId:"demo-simple-select-label",id:"demo-simple-select",label:"M\xeas"},b("mes")),{},{size:"small",defaultValue:p,children:ze.D.map((function(e,t){return(0,w.jsx)(se.Z,{value:e.id,children:e.label},t)}))}))]}),(0,w.jsx)(ce.Qr,{name:"id_band",control:_,rules:{required:!0},render:function(e){var t=e.field;return(0,w.jsx)(Ie.Z,{children:(0,w.jsxs)(oe.Z,{error:!!Z.id_band,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"Banda *"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({size:"small",sx:{minWidth:270},labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",label:"Banda",defaultValue:""},t),{},{children:l.map((function(e){if(!e.is_deleted)return(0,w.jsx)(se.Z,{value:e.id,children:e.name},V()())}))})),!!Z.id_band&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:"Selecione uma banda"})]})})}}),r?(0,w.jsx)(a.Z,{variant:"contained",endIcon:(0,w.jsx)(Re.Z,{}),type:"submit",style:{width:"100%"},children:"Buscar"}):(0,w.jsx)(c.Z,{"aria-label":"delete",type:"submit",style:{backgroundColor:"#42A5F5",color:"white",height:"40px"},children:(0,w.jsx)(Re.Z,{})})]})})})})},Ae=r(6435),Me=r.n(Ae),Ne=r(5834);Me().vfs=Ne.I.vfs;var We=pe.Ry().shape({start_date:pe.hT().required("Data inicial obrigat\xf3rio"),end_date:pe.hT().required("Data inicial obrigat\xf3rio"),id_band:pe.Rx().required("Banda \xe9 obrigat\xf3rio")}),Te=function(e){var t=e.toggleDrawer,r=((0,i.a)().id,(0,n.useState)(!1)),o=(0,l.Z)(r,2),s=(o[0],o[1]),c=(0,j.X)().mobile,u=(0,ve.f)().myBands,p=(0,ge.P)(),x=(p.creditors,p.getCreditors,new Date),f=(0,y.M)().getCheckoutsByAppointments,h=(0,Ze.Q)().getAppointmentsByDate,m=function(e,t,r,n){var i=Me().createPdf(function(e,t,r,n){var i=e[0].band,o=[],l=e.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}),a=e.filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}),s=(e.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0)-e.filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0)).toLocaleString("pt-br",{style:"currency",currency:"BRL"});return n.map((function(t){var r=e.filter((function(e){return e.id_appointment==t})),n=[];if(r.length){n.push(r[0].appointment.title),n.push(new Date(r[0].appointment.start_date).toLocaleDateString());var i=null===r||void 0===r?void 0:r.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(i);var l=r.filter((function(e){var t;return"comercial"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(l);var a=r.filter((function(e){var t;return"batera"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(a);var s=r.filter((function(e){var t;return"percuss\xe3o"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(s);var d=r.filter((function(e){var t;return"viol\xe3o"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(d);var c=r.filter((function(e){var t;return"baixo"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(c);var u=r.filter((function(e){var t;return"operador staff"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(u);var p=r.filter((function(e){var t;return"outros"==(null===(t=e.creditor)||void 0===t?void 0:t.name.toLowerCase())})).filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"}).split("\xa0")[1];n.push(p);var x=r.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"});n.push(x);var f=r.filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0).toLocaleString("pt-br",{style:"currency",currency:"BRL"});n.push(f);var h=r.filter((function(e){return 1==e.type})).reduce((function(e,t){return e+Number(t.value)}),0)-r.filter((function(e){return 2==e.type})).reduce((function(e,t){return e+Number(t.value)}),0);n.push(h.toLocaleString("pt-br",{style:"currency",currency:"BRL"})),o.push(n.map((function(e){return"R$\xa00,00"==e?"--":e})))}console.log(o.filter((function(e){return e.length})))})),{pageOrientation:"landscape",content:[{text:"Redbus Produ\xe7\xf5es",style:"header"},{text:[{text:"CNPJ: ",fontSize:12,bold:!0},"48866171/0001-24    ",{text:"Email: ",fontSize:12,bold:!0},"redbusproducoes@gmail.com    ",{text:"Tel.: ",fontSize:12,bold:!0},"(61) 9533-1001"]},{text:[{text:"Banda: ",fontSize:12,bold:!0},(null===i||void 0===i?void 0:i.name)+"    ",{text:"Per\xedodo: ",fontSize:12,bold:!0},"".concat(new Date(t+"T03:00:00").toLocaleDateString()," - ").concat(new Date(r+"T03:00:00").toLocaleDateString(),"    \n\n\n")]},{style:"tableExample",table:{headerRows:1,body:[[{text:"Evento",style:"tableHeader"},{text:"Data",style:"tableHeader"},{text:"Cache",style:"tableHeader"},{text:"Comercial",style:"tableHeader"},{text:"Batera",style:"tableHeader"},{text:"Percuss\xe3o",style:"tableHeader"},{text:"Viol\xe3o",style:"tableHeader"},{text:"Baixo",style:"tableHeader"},{text:"Staff",style:"tableHeader"},{text:"Outros",style:"tableHeader"},{text:"Entradas",style:"tableHeader"},{text:"Sa\xeddas",style:"tableHeader"},{text:"Lucro",style:"tableHeader"}]].concat(o)},layout:{fillColor:function(e,t,r){return e%2===0?"#CCCCCC":null}}},{text:["\n\n"]},{text:[{text:"Total de entradas: ",fontSize:12,bold:!0},"".concat(l,"\n"),{text:"Total de sa\xeddas: ",fontSize:12,bold:!0},"".concat(a,"\n"),{text:"Lucro:",fontSize:12,bold:!0},"".concat(s,"\n")]}],styles:{header:{fontSize:16,bold:!0},anotherStyle:{italics:!0,alignment:"right"}}}}(e,t,r,n));i.open(),i.download()},b=(0,ce.cI)({resolver:(0,ue.X)(We),mode:"onSubmit"}),v=b.handleSubmit,Z=b.control,S=b.formState.errors,_=b.register,D=b.setValue,k=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(r){var n,i,o,l,a,d,c,u;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.start_date.toISOString().substring(0,10),i=r.end_date.toISOString().substring(0,10),o=r.id_band,e.prev=3,G.Am.warning("Gerando relat\xf3rio aguarde...."),s(!0),e.next=8,h(n,i,o);case 8:if(l=e.sent,!(a=l.data).length){e.next=18;break}return d=a.map((function(e){return e.id})),e.next=14,f(n,i,r.id_band,d.join(","));case 14:c=e.sent,(u=c.data).length&&m(u,n,i,d),G.Am.success("Relat\xf3rio gerado com sucesso");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),console.log(e.t0),G.Am.error(e.t0);case 24:return e.prev=24,s(!1),t(),e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[3,20,24,28]])})));return function(t){return e.apply(this,arguments)}}();return n.useEffect((function(){var e;1==u.filter((function(e){return!e.is_deleted})).length&&D("id_band",(null===(e=u.find((function(e){return!e.is_deleted})))||void 0===e?void 0:e.id)||0)}),[u]),(0,w.jsx)(U.ZP,{padding:c?2:8,children:(0,w.jsxs)("form",{onSubmit:v(k),children:[(0,w.jsxs)(be.Z,{spacing:3,children:[(0,w.jsx)(be.Z,{children:(0,w.jsx)(g.Z,{variant:"subtitle1",children:"Preencha com as informa\xe7\xf5es para gerar um relat\xf3rio"})}),(0,w.jsx)(be.Z,{direction:c?"column":"row",spacing:2,children:(0,w.jsx)(oe.Z,{fullWidth:!0,children:(0,w.jsxs)("fieldset",{style:{border:"".concat(S.start_date?"1px #E34367 solid":"1px #C0C0C0 solid"),borderRadius:"4px"},children:[(0,w.jsx)("legend",{style:{fontSize:"12px",color:"#696969"},children:"Data inicial"}),(0,w.jsx)(d.Z,{children:(0,w.jsx)("input",(0,L.Z)((0,L.Z)({type:"date",defaultValue:new Date(x.getFullYear(),x.getMonth()).toISOString().substring(0,10)},_("start_date")),{},{style:{height:"24px",border:"none",outline:"none",width:"100%"}}))})]})})}),(0,w.jsx)(be.Z,{direction:c?"column":"row",spacing:2,children:(0,w.jsx)(oe.Z,{fullWidth:!0,children:(0,w.jsxs)("fieldset",{style:{border:"".concat(S.end_date?"1px #E34367 solid":"1px #C0C0C0 solid"),borderRadius:"4px"},children:[(0,w.jsx)("legend",{style:{fontSize:"12px",color:"#696969"},children:"Data final"}),(0,w.jsx)(d.Z,{children:(0,w.jsx)("input",(0,L.Z)((0,L.Z)({type:"date",defaultValue:new Date(x.getFullYear(),x.getMonth()+1,0).toISOString().substring(0,10)},_("end_date")),{},{style:{height:"24px",border:"none",outline:"none",width:"100%"}}))})]})})}),(0,w.jsx)(ce.Qr,{name:"id_band",control:Z,render:function(e){var t,r=e.field;return(0,w.jsx)(d.Z,{children:(0,w.jsxs)(oe.Z,{error:!!S.id_band,fullWidth:!0,children:[(0,w.jsx)(le.Z,{id:"demo-simple-select-helper-label",children:"Banda *"}),(0,w.jsx)(ae.Z,(0,L.Z)((0,L.Z)({size:"small",sx:{minWidth:270},labelId:"demo-simple-select-error-label",id:"demo-simple-select-error",label:"Banda",defaultValue:1==u.filter((function(e){return!e.is_deleted})).length?null===(t=u.find((function(e){return!e.is_deleted})))||void 0===t?void 0:t.id:0},r),{},{children:u.map((function(e){if(!e.is_deleted)return(0,w.jsx)(se.Z,{value:e.id,children:e.name},V()())}))})),!!S.id_band&&(0,w.jsx)(ie.Z,{sx:{color:"#E34367"},children:"Selecione uma banda"})]})})}})]}),(0,w.jsx)(be.Z,{spacing:"10px",mt:3,children:(0,w.jsx)(a.Z,{type:"submit",variant:"contained",children:"Baixar relat\xf3rio"})})]})})},Pe=function(){var e=(0,o.s0)(),t=(0,n.useState)(["m\xeas"]),r=(0,l.Z)(t,2),i=(r[0],r[1]),v=(0,n.useState)(!1),g=(0,l.Z)(v,2),Z=g[0],j=g[1],y=function(){j((function(e){return!e}))},S=(0,n.useState)(""),C=(0,l.Z)(S,2),B=C[0],D=C[1],L={checkout:(0,w.jsx)(Se,{data:{},toggleDrawer:y}),report:(0,w.jsx)(Te,{toggleDrawer:y})};return(0,w.jsxs)("div",{style:{padding:"8px",margin:"8px",position:"relative"},children:[(0,w.jsxs)(a.Z,{startIcon:(0,w.jsx)(f.Z,{}),onClick:function(){return e("/calendar")},children:[" ","Voltar"]}),(0,w.jsxs)(be.Z,{direction:"row",children:[(0,w.jsx)(s.Z,{title:"Minhas Finan\xe7as",style:{padding:"8px 0"}}),(0,w.jsx)(d.Z,{display:"flex",alignItems:"center",children:(0,w.jsx)(h.Z,{color:"primary",style:{cursor:"pointer",marginLeft:"6px"},onClick:function(){D("report"),j(!0)}})})]}),(0,w.jsx)(Ee,{setCurrentFilter:i}),(0,w.jsx)(d.Z,{position:"absolute",top:0,right:10,onClick:function(){},children:(0,w.jsxs)(c.Z,{color:"primary",component:"label",onClick:function(){D("checkout"),j(!0)},children:[(0,w.jsx)(m.Z,{})," ",(0,w.jsx)("small",{style:{fontSize:"10px"},children:"Registrar entrada/sa\xedda"})]})}),(0,w.jsxs)(u.Z,{style:{},children:[(0,w.jsx)(_,{}),(0,w.jsx)(_e,{}),(0,w.jsx)(Le,{})]}),(0,w.jsxs)(p.ZP,{anchor:"left",open:Z,onClose:y,style:{padding:"0 4px 0 4px"},children:[(0,w.jsx)(c.Z,{onClick:y,size:"medium",style:{width:"25px",marginLeft:"8px"},children:(0,w.jsx)(b.Z,{alignmentBaseline:"baseline"})}),(0,w.jsx)(x.Z,{}),L[B],(0,w.jsx)(x.Z,{})]})]})},Ve=r(328),Oe=function(){(0,i.a)().accessToken,(0,o.s0)();return(0,w.jsxs)("div",{children:[(0,w.jsx)(Ve.h,{hiddenFilter:!0}),(0,w.jsx)(Pe,{})]})}}}]);
//# sourceMappingURL=380.def9fc65.chunk.js.map